# format string 0 picoCTF Write-Up

## Deskripsi
Tantangan ini mengeksploitasi kerentanan **buffer overflow** untuk memicu handler `SIGSEGV` yang mencetak flag. Program membaca input pengguna tanpa validasi panjang, membuka peluang eksploitasi.

---

## Kerentanan

### 1. Buffer Overflow
- Fungsi `serve_patrick` membaca input pengguna ke buffer `choice1` yang berukuran 32 byte tanpa memeriksa panjang input.
- Contoh kode:
  ```c
  #define BUFSIZE 32

  char choice1[BUFSIZE];
  scanf("%s", choice1);
  ```
- Input yang lebih panjang dari 32 karakter menyebabkan **buffer overflow**, yang dapat merusak memori dan memicu segmentation fault.

### 2. Handler SIGSEGV
- Ketika terjadi segmentation fault, handler khusus `sigsegv_handler` akan mencetak isi buffer `flag`:
  ```c
  void sigsegv_handler(int sig) {
      printf("\n%s\n", flag);
      exit(1);
  }
  ```
- Dengan memanfaatkan buffer overflow, memicu handler ini untuk mencetak flag yang disimpan di dalam file `flag.txt`.

---

## Eksploitasi

1. **Masukkan Payload**:
   - Kirimkan string dengan panjang lebih dari 32 karakter untuk memicu buffer overflow.
   - Contoh payload:
     ```
     AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
     ```

2. **Memicu Segmentation Fault**:
   - Buffer overflow merusak memori dan menyebabkan segmentation fault.

3. **Handler Mencetak Flag**:
   - Saat segmentation fault terjadi, handler `SIGSEGV` mencetak isi buffer `flag`.

---

## Flag
Setelah eksploitasi berhasil, program mencetak flag berikut:
```
picoCTF{7h3_cu570m3r_15_n3v3r_SEGFAULT_c8362f05}
```


